/*
    #define  0xFF0000FF
This page has been generated by ExtremePAWN
*/

//Callbacks.inc

#define PLAYER_ACTION_NONE      (0)
#define PLAYER_ACTION_SHOOTING  (1)
#define PLAYER_ACTION_SWIMMING  (2)
#define PLAYER_ACTION_SKYDIVING (3)
#define PLAYER_ACTION_JUMPING   (4)

//Includes

#include <a_samp>
#include <callbacks>
#include <a_actor>
#include <a_http>
#include <a_npc>
#include <a_objects>
#include <a_players>
#include <a_vehicles>
#include <a_sampdb>
#include <core>
#include <datagram>
#include <file>
#include <float>
#include <gl_common>
#include <gl_messages>
#include <string>
#include <time>
#include <vehicleutil>
#include <Defines_COLOR_VEH_WEAPONS>
#include <zcmd>

enum
{
	DIALOG_GPS, // The gps system
	DIALOG_WEAPONS, // The weapons dialog
	DIALOG_TUTORIAL, // If the player likes to start the Tutorial
  DIALOG_FC, // The dialog for fort carson
	DIALOG_CITYHALL, //the dialog for the city hall
  DIALOG_COLLEGE, //the dialog for the college
  DIALOG_SD, //the dialog for the SD
  DIALOG_HOSPITAL, //the dialog for the hospital
  DIALOG_FEDEX, //the dialog for the fedex depot
  DIALOG_FINISH //the dialog for finishing
}

main()
{
	print("Welcome to our test server, Enjoy your stay =)");
	return 1;
}

new pickup_ak; // Create a variable to store the pickup ID in

public OnGameModeInit()
{
	// Don't use these lines if it's a filterscript
	SetGameModeText("test server");
	AddPlayerClass(0, 1958.3783, 1343.1572, 15.3746, 269.1425, 0, 0, 0, 0, 0, 0);
	AddPlayerClass(100, 1958.3783, 1343.1572, 15.3746, 269.1425, 0, 0, 0, 0, 0, 0);
	pickup_ak = CreatePickup(355, 2, -213.0206, 991.2901, 19.5029, 0);
	return 1;
}

public OnPlayerActionChange(playerid, oldaction, newaction)
{
    if (newaction == PLAYER_ACTION_SHOOTING)
    {
    return 1;    //SendClientMessage(playerid, COLOR_WHITE, "You are now shooting a weapon.");
    }
    else if (newaction == PLAYER_ACTION_SKYDIVING)
    {
    return 1;
    }
    else if (newaction == PLAYER_ACTION_SWIMMING)
    {
	return 1;
    }
    else if (newaction == PLAYER_ACTION_JUMPING)
    {
    return 1;
	}
	return 0;
}

public OnGameModeExit()
{
	return 1;
}

public OnPlayerRequestClass(playerid, classid)
{
	SetPlayerPos(playerid, 1958.3783, 1343.1572, 15.3746);
	ApplyAnimation(playerid, "ON_LOOKERS", "wave_loop", 4.0, 1, 0, 0, 0, 0); //
	SetPlayerCameraPos(playerid, 1955.2679, 1343.9951, 15.3746);
	SetPlayerCameraLookAt(playerid, 1958.3783, 1343.1572, 15.3746);
	SetPlayerFacingAngle(playerid, 88);
	return 1;
}

public OnPlayerConnect(playerid)
{
	SetPlayerColor(playerid, COLOR_RED);
	SendClientMessage (playerid, COLOR_WHITE, "Welcome to our test server, happy testing!");
	new pName[MAX_PLAYER_NAME];
	GetPlayerName(playerid, pName, sizeof(pName));
	new pubMessage[64];
	format(pubMessage, sizeof pubMessage, "%s has joined the server. Welcome!", pName);
	SendClientMessageToAll(COLOR_WHITE, pubMessage);
	return 1;
}

public OnPlayerDisconnect(playerid, reason)
{
	new pName[MAX_PLAYER_NAME];
	GetPlayerName(playerid, pName, sizeof(pName));
	new pubMessage[68];
	format(pubMessage, sizeof pubMessage, "%s has left the server. Good bye!", pName);
	SendClientMessageToAll(COLOR_WHITE, pubMessage);
	return 1;
}

public OnPlayerSpawn(playerid)
{
	SetPlayerHealth(playerid, 100);
	SetPlayerColor(playerid, COLOR_WHITE);
	GivePlayerMoney(playerid, 10000);
	SendClientMessage(playerid, COLOR_GREEN, "Enjoy your $10.000");
	return 1;
}

public OnPlayerDeath(playerid, killerid, reason)
{
	GivePlayerMoney(playerid, -10000);
	return 1;
}

public OnVehicleSpawn(vehicleid)
{
	return 1;
}

public OnVehicleDeath(vehicleid, killerid)
{
	return 1;
}

public OnPlayerText(playerid, text[])
{
  new pText[144];
  format(pText, sizeof (pText), "(%d) %s", playerid, text);
  SendPlayerMessageToAll(playerid, pText);
  return 0;
}

	CMD:tutorial(playerid, params[])
	{
	  ShowPlayerDialog(playerid, DIALOG_TUTORIAL, DIALOG_STYLE_MSGBOX, "Tutorial",
	  "Would you like to start the tutorial?\n\
	  "
	  , "yes", "no");
	  return 1;
	}

	CMD:fc(playerid, params[])
	{
		SetPlayerPos(playerid, -211.3621, 1001.3024,19.6920);
		SendClientMessage(playerid, COLOR_WHITE, "Welcome to Fort Carson");
		return 1;
	}

 	CMD:weapons(playerid, params[])
	{
		SetPlayerArmour(playerid, 0.0);
		SetPlayerArmour(playerid, 100.0);
		ShowPlayerDialog(playerid, DIALOG_WEAPONS, DIALOG_STYLE_LIST, "weapons",
		"Ak47\n\
		M4\n\
		Knife\n\
		Tec9\n\
		Desert Eagle\n\
		Shotgun\n\
		Rifle\n\
		"
		, "Select", "Cancel");
		return 1;
	}

 	CMD:god(playerid, params[])
	{
		new Float:health;
		new Phealth [64];
		GetPlayerHealth(playerid, health);
		if (health <= 100.0)
		{
			SetPlayerHealth(playerid, 10000.0);
		 	SetPlayerColor(playerid, COLOR_BLUE);
		 	SendClientMessage(playerid, COLOR_WHITE, "Godmode activated");
			format(Phealth, sizeof Phealth, "Your health is %f", health);
			SendClientMessage(playerid, COLOR_WHITE, Phealth);
		}
		else if (health > 100.0)
		{
			SetPlayerHealth(playerid, 100.0);
			SetPlayerColor(playerid, COLOR_WHITE);
			SendClientMessage(playerid, COLOR_WHITE, "Godmode deactivated");
			format(Phealth, sizeof Phealth, "Your health is %f", health);
			SendClientMessage(playerid, COLOR_WHITE, Phealth);
		}
 		return 1;
	}

	CMD:respawn(playerid, params[])
	{
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerHealth(playerid, 100.0);
		GivePlayerMoney(playerid, -10000);
		SpawnPlayer(playerid);
		ResetPlayerWeapons(playerid);
		return 1;
	}

 	CMD:commands(playerid, params[])
	{
		SendClientMessage(playerid, COLOR_WHITE, "/FC (Teleports to Fort Carson)");
		SendClientMessage(playerid, COLOR_WHITE, "/god (enables godmode)");
		SendClientMessage(playerid, COLOR_WHITE, "/weapons (gives you weapons");
		SendClientMessage(playerid, COLOR_WHITE, "/respawn (respawn");
		return 1;
	}

	CMD:gps(playerid, params[])
	{
		// Open dialog and selection menu
		ShowPlayerDialog(playerid, DIALOG_GPS, DIALOG_STYLE_LIST, "gps",
		"Cityhall\n\
		Bank\n\
		FedEx depot\n\
		College\n\
		Dealership\n\
		Trucking depot\n\
		FedEx\n\
		"
		, "Select", "Cancel");
		return 1;
	}

public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
	return 1;
}

public OnPlayerExitVehicle(playerid, vehicleid)
{
	return 1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
	return 1;
}

public OnPlayerEnterCheckpoint(playerid)
{
	DisablePlayerCheckpoint(playerid);
	return 1;
}

public OnPlayerLeaveCheckpoint(playerid)
{
	return 1;
}

public OnPlayerEnterRaceCheckpoint(playerid)
{
	return 1;
}

public OnPlayerLeaveRaceCheckpoint(playerid)
{
	return 1;
}

public OnRconCommand(cmd[])
{
	return 1;
}

public OnPlayerRequestSpawn(playerid)
{
	return 1;
}

public OnObjectMoved(objectid)
{
	return 1;
}

public OnPlayerObjectMoved(playerid, objectid)
{
	return 1;
}

public OnPlayerPickUpPickup(playerid, pickupid)
{
	if(pickupid == pickup_ak)
	{
		GivePlayerWeapon(playerid, AK47, 1000);
	}
	return 1;
}

public OnVehicleMod(playerid, vehicleid, componentid)
{
	return 1;
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{
	return 1;
}

public OnVehicleRespray(playerid, vehicleid, color1, color2)
{
	return 1;
}

public OnPlayerSelectedMenuRow(playerid, row)
{
	return 1;
}

public OnPlayerExitedMenu(playerid)
{
	return 1;
}

public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid)
{
	return 1;
}

public OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
	return 1;
}

public OnRconLoginAttempt(ip[], password[], success)
{
	return 1;
}

public OnPlayerUpdate(playerid)
{
	return 1;
}

public OnPlayerStreamIn(playerid, forplayerid)
{
	return 1;
}

public OnPlayerStreamOut(playerid, forplayerid)
{
	return 1;
}

public OnVehicleStreamIn(vehicleid, forplayerid)
{
	return 1;
}

public OnVehicleStreamOut(vehicleid, forplayerid)
{
	return 1;
}

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
	if(response)
  {
    switch(dialogid)
    {
      case DIALOG_GPS:
      {
        switch (listitem)
        {
          case 0:
          {
						SendClientMessage(playerid, COLOR_YELLOW, "You have selected City Hall");
						SetPlayerCheckpoint(playerid, -206.2056, 1118.9186, 20.2590, 3.0);// City hall
          }
          case 1:
          {
            SendClientMessage(playerid, COLOR_YELLOW, "You have selected Bank");
            SetPlayerCheckpoint(playerid, -176.7930, 1111.7858, 19.7422, 3.0);// Bank
          }
          case 2:
          {
          	SendClientMessage(playerid, COLOR_YELLOW, "You have selected FedEx");
          	SetPlayerCheckpoint(playerid, -145.0520, 1081.1747, 19.7500, 3.0);// FedEx depot
          }
          case 3:
          {
            SendClientMessage(playerid, COLOR_YELLOW, "You have selected College");
            SetPlayerCheckpoint(playerid, 110.2725, 1058.7499, 13.6154, 3.0);// College
		  		}
        	case 4:
		  		{
						SendClientMessage(playerid, COLOR_YELLOW, "You have selected Dealership");
						SetPlayerCheckpoint(playerid, 177.0127, 1183.2480, 14.7578, 3.0);//Dealership
		  		}
		  		case 5:
		  		{
						SendClientMessage(playerid, COLOR_YELLOW, "You have selected the trucking depot");
						SetPlayerCheckpoint(playerid, 584.6690, 1209.3134, 12.2333, 3.0);//Trucking depot
	      	}
		  		case 6:
		  		{
		    		SendClientMessage(playerid, COLOR_YELLOW, "You have selected the FedEx runway runway");
		    		SetPlayerCheckpoint(playerid, 346.3111, 1797.5247, 18.3872, 3.0);//FedEx Runway
  				}
    		}
    	}
			case DIALOG_WEAPONS:
   		{
    		switch (listitem)
        {
				 	case 0:
				 	{
				 		SendClientMessage(playerid, COLOR_RED, "You have choosen an AK47");
				 		GivePlayerWeapon(playerid, AK47, 1000);
				 	}
				 	case 1:
				 	{
				 		SendClientMessage(playerid, COLOR_RED, "You have choosen an M4");
				 		GivePlayerWeapon(playerid, M4, 1000);
				 	}
				 	case 2:
				 	{
				 		SendClientMessage(playerid, COLOR_RED, "You have choosen a knife");
				 		GivePlayerWeapon(playerid, KNIFE, 1);
				 	}
				 case 3:
				 	{
				 		SendClientMessage(playerid, COLOR_RED, "You have choosen a TEC9");
				 		GivePlayerWeapon(playerid, TEC9, 1000);
				 	}
				 	case 4:
				 	{
				 		SendClientMessage(playerid, COLOR_RED, "You have choosen a Desert eagle");
				 		GivePlayerWeapon(playerid, DESERT_EAGLE, 1000);
				 	}
				 	case 5:
				 	{
				 		SendClientMessage(playerid, COLOR_RED, "You have choosen a shotgun");
				 		GivePlayerWeapon(playerid, SHOTGUN, 1000);
				 	}
				 	case 6:
				 	{
				 		SendClientMessage(playerid, COLOR_RED, "You have choosen a Rifle");
				 		GivePlayerWeapon(playerid, RIFLE, 1000);
				 	}
				}
    	}

			case DIALOG_TUTORIAL:
			{
				if (response)
				{
					SetPlayerCameraPos(playerid, 33.5722, 1167.1045, 94.6055);
					SetPlayerCameraLookAt(playerid, -190.2980, 1128.4006, 19.5929);
					ShowPlayerDialog(playerid, DIALOG_FC, DIALOG_STYLE_MSGBOX, "Tutorial",
					"Welcome to RidgeCrest Roleplay,\n\
					In this tutorial we're going to cover some basic locations.\n\
					"
					, "Continue", "");
					return 1;
				}
				else
				{
					SendClientMessage(playerid, COLOR_ORANGE, "You have canceled the tutorial.");
					return 1;
				}
			}
			case DIALOG_FC:
			{
				SetPlayerCameraPos(playerid, -187.9593, 1118.7156, 23.8026);
				SetPlayerCameraLookAt(playerid, -207.5477, 1119.2731, 20.4297);
				ShowPlayerDialog(playerid, DIALOG_CITYHALL, DIALOG_STYLE_MSGBOX, "City hall",
				"This is the city hall. You can pay off tickets and also aquire a license here.\n\
				Dont forget to take classes in college to have the ability to take the test.\n\
				"
				, "Continue", "");
				return 1;
			}
			case DIALOG_CITYHALL:
			{
				SetPlayerCameraPos(playerid, 110.2658, 1086.3412, 25.9279);
				SetPlayerCameraLookAt(playerid, 110.1809, 1050.7789, 18.9344);
				ShowPlayerDialog(playerid, DIALOG_COLLEGE, DIALOG_STYLE_MSGBOX, "College",
				"This is the college. For every job and license you will have to take your classes here.\n\
				This is also the perfect opportunity to take or organize classes from other players.\n\
				"
				, "continue", "");
				return 1;
			}
			case DIALOG_COLLEGE:
			{
				SetPlayerCameraPos(playerid, -311.1235, 1083.0095, 32.1056);
				SetPlayerCameraLookAt(playerid, -320.0216, 1048.5702, 20.3403);
				ShowPlayerDialog(playerid, DIALOG_HOSPITAL, DIALOG_STYLE_MSGBOX, "Hospital",
				"This is the hospital. If you call 911 and select medical an ambulance will be send from here.\n\
				This is also where you can buy a health insurance to cover for the expenses.\n\
				"
				, "Continue", ""); // Can you verify the health insurance thing? If it aint there remove it
				return 1;
			}
			case DIALOG_HOSPITAL:
			{
				SetPlayerCameraPos(playerid, -149.0728, 1112.9447, 29.1646);
				SetPlayerCameraLookAt(playerid, -151.2296, 1086.8920, 20.8094);
				ShowPlayerDialog(playerid, DIALOG_FEDEX, DIALOG_STYLE_MSGBOX, "FedEx",
				"This is the FedEx depot. Its really recommended that this would be your first job.\n\
				You should get classes for this job at our college.\n\
				"
				, "Continue", "");
				return 1;
			}
			case DIALOG_FEDEX:
			{
				SetPlayerCameraPos(playerid, 33.5722, 1167.1045, 94.6055);
				SetPlayerCameraLookAt(playerid, -190.2980, 1128.4006, 19.5929);
				ShowPlayerDialog(playerid, DIALOG_FINISH, DIALOG_STYLE_MSGBOX, "Finishing",
				"That was it for this tutorial. On behold of our staff we would like to welcome you to our server.\n\
				To see some usefull locations please dont forget to use the command /gps.\n\
				"
				, "End Tutorial", "");
				return 1;
			}

			case DIALOG_FINISH:
			{
				SetCameraBehindPlayer(playerid);
				return 1;
			}
  	}
	}
	return 1;
}

public OnPlayerClickPlayer(playerid, clickedplayerid, source)
{
	return 1;
}
